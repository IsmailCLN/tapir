- suite_name: finance
  requests:
    - name: btcusdt_price
      request:
        method: GET
        url: https://api.binance.com/api/v3/ticker/price?symbol=BTCUSDT
      expect:
        - expectation_type: expect_number_to_be_between
          kwargs: { column: price, min: 100, max: 20000 }        
        - expectation_type: expect_number_to_be_between
          kwargs: { column: price, min: 100 }
        - expectation_type: expect_status_code_between
          kwargs:
            min: 300
            max: 499        
        - expectation_type: expect_status_code_equals
          kwargs:
            code: 200

- suite_name: auth_flow
  requests:
  - name: login
    request:
      method: POST
      url: https://dummyjson.com/auth/login
      headers:
        Content-Type: application/json
      body: |
        {
          "username": "emilys",
          "password": "emilyspass",
          "expiresInMins": 30
        }
    expect:
      - expectation_type: store_token
        kwargs:
          json_path: accessToken
      - expectation_type: expect_status_code_equals
        kwargs:
          code: 200

  - name: get_profile
    request:
      method: GET
      url: https://dummyjson.com/auth/me
      headers:
        Authorization: "Bearer ${token}"
    expect:
      - expectation_type: expect_status_code_equals
        kwargs:
          code: 200

- suite_name: static_body_check
  requests:
    - name: todo_1_fixed_body
      request:
        method: GET
        url: https://jsonplaceholder.typicode.com/todos/1
      expect:
        - expectation_type: expect_body_equals
          kwargs:
            value: |
              {
                "userId": 1,
                "id": 1,
                "title": "delectus aut autem",
                "completed": false
              }
        - expectation_type: expect_status_code_equals
          kwargs:
            code: 200
